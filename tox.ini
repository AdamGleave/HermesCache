[tox]
envlist = 
  py27, py33, 
  py27-redis, py33-redis,
  py27-pylibmc, py33-pylibmc

[testenv]
downloadcache = ../.cache

[testenv:py27]
basepython = python2.7
commands   = 
  coverage run --branch --include="hermes/*" --omit="hermes/test/*" setup.py test
  coverage report -m
  coverage erase
deps =
  coverage
  redis
  hiredis
  python-memcached
  
[testenv:py33]
basepython = python3.3
commands   =
  coverage run --branch --include="hermes/*" --omit="hermes/test/*" setup.py test
  coverage report -m
  coverage erase
deps =
  coverage
  redis
  hiredis
  python3-memcached
  
[testenv:py27-redis]
basepython = python2.7
commands   = python setup.py test -q -s hermes.test.redis
deps       = redis
  
[testenv:py33-redis]
basepython = python3.3
commands   = python setup.py test -q -s hermes.test.redis
deps       = redis
  
[testenv:py27-pylibmc]
basepython = python2.7
commands   = python setup.py test -q -s hermes.test.memcached
deps       = pylibmc
  
[testenv:py33-pylibmc]
basepython = python3.3
commands   = python setup.py test -q -s hermes.test.memcached
# pylibmc 1.3.0 from pypi fails to build
deps = git+https://github.com/lericson/pylibmc
